- commits:
    - subject: Add missing await
      hash: 97ed30f9cc16c2350e3c0233d5024e8a70db9431
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Josh Bowling <josh@balena.io>
        signed-off-by: Josh Bowling <josh@balena.io>
      author: Josh Bowling
  version: 6.0.1
  title: "'Add missing await'"
  date: 2022-04-06T02:08:06.136Z
- commits:
    - subject: Update prom-client to 14.x
      hash: 81a8d36fa6c62c5dfec892a4a0c17f8596bd5873
      body: ""
      footer:
        Change-type: major
        change-type: major
      author: Pagan Gazzard
  version: 6.0.0
  title: "'Update prom-client to 14.x'"
  date: 2022-04-05T14:58:33.322Z
- commits:
    - subject: Update dependencies
      hash: 0a8aefe639904a36cf3608f6aebc8a2c7bd9a25b
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.7.6
  title: "'Update dependencies'"
  date: 2022-04-05T14:43:06.093Z
- commits:
    - subject: Improve typings
      hash: 5ab71bb9957254eb1e20687e57215d1c41e8d5c1
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
    - subject: Respect the expected kind when checking for existence in `ensureExists`
      hash: 626bc46d169856321990b94db9ef75b74920ee3f
      body: |
        This avoids a potential issue where the metric name was created for a
        different metric kind and would be treated as existing but accessing it
        would fail. This should also be more performant due to avoiding the
        need for the indirect lookups
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.7.5
  date: 2021-07-05T15:49:10.410Z
- commits:
    - subject: Enable strict tsconfig options by default
      hash: 59ff465312b1fe660d7347d1118988f3ebdab233
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
    - subject: Update dependencies
      hash: 0d08cebe5dd4448ffbb31ba8de615d6dadf37a9a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.7.4
  date: 2021-07-05T14:02:38.058Z
- commits:
    - subject: Fix missing types reference in package.json
      hash: b702bdba705f6db1f0032ae4eb105f5e6331f464
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Roman Mazur <roman@balena.io>
        signed-off-by: Roman Mazur <roman@balena.io>
      author: Roman Mazur
  version: 5.7.3
  date: 2020-07-22T12:41:09.440Z
- commits:
    - subject: revert 5.7.1 - should have been semver major
      hash: 47e939c0fe0ffe9be9003a7d81913de099b3f7d4
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.7.2
  date: 2020-07-02T14:00:25.644Z
- commits:
    - subject: api latency in seconds
      hash: 46b778ff3f1c6b2af719e980f917f1b534cc56fd
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.7.1
  date: 2020-06-30T17:33:26.684Z
- commits:
    - subject: export constructor for non-process-global usage
      hash: 19e6d43a20bbe9271fc741d5a6222cce3e6c7d06
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
    - subject: process.hrtime [0] returns *seconds*, not ms, so patch to timing logic
      hash: b4be91210e720fa60d9b7f681262abae4be680d8
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.7.0
  date: 2020-05-22T17:08:01.635Z
- commits:
    - subject: comprehensive refactor / cleanup of API metrics gathering
      hash: 3c53896e607eeea2811772db9dc303ea8cb020a9
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.6.0
  date: 2020-04-23T04:12:25.641Z
- commits:
    - subject: exportOn() to have default path /metrics, requiring only port
      hash: e5fa4bc8c6a93d24b23de32107c8d2396fca6543
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.5.0
  date: 2020-04-23T03:42:27.804Z
- commits:
    - subject: expose underlying client so underlying original functions are still
        available if our semantics are different
      hash: 1e0a8799370d670b6c49921666c2cd0f702a46b2
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.4.0
  date: 2020-04-10T18:26:03.646Z
- commits:
    - subject: add simpler export method exportOn()
      hash: 8bef15d5bf14cacd6f860f4ff25491984e20f0dd
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.3.0
  date: 2020-04-10T17:32:13.145Z
- commits:
    - subject: add behaviour to auto-detect a counter based on _total suffix
      hash: 7b6933fdb4fbe5bb49ef72d0b0e1e21e01566f5e
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.2.1
  date: 2020-04-07T15:43:42.254Z
- commits:
    - subject: use declaration files in testing / building
      hash: 0485e0e681fd9e90e2f4cd6f571af757e343df3a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
    - subject: measure generic, useful express API metrics by a method
      hash: c01f44a23ad29b0b13da9171cdbfca28a586acc0
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.2.0
  date: 2020-04-07T04:14:23.404Z
- commits:
    - subject: collectDefaultMetrics passthrough method
      hash: 268f7da055a56fae0545f81e02336f85b13ab4f0
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 5.1.0
  date: 2020-02-24T19:55:22.943Z
- commits:
    - subject: Update prom-client to 12.x
      hash: 5b84f63caeb9954ba4e40c0c9a2a6fa09bcc9926
      body: ""
      footer:
        Change-type: major
        change-type: major
      author: Pagan Gazzard
  version: 5.0.0
  date: 2020-02-24T18:37:51.751Z
- commits:
    - subject: Update dependencies and use standard linting
      hash: 982fe061c438c104ddaa22c03dd4915641c09515
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 4.0.2
  date: 2020-02-24T18:07:58.246Z
- commits:
    - subject: Avoid unnecessarily serialising the stack trace
      hash: e37a45b53a1ad28e247fa00c5cd595cc0db1f57e
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 4.0.1
  date: 2019-10-10T18:21:37.743Z
- commits:
    - subject: explicit typing of metrics at describe time, simplified metrics
        metadata handling, improve single-line summary/histogram
      hash: d3a3f84069d6e41e6e4b5dec9c8075e2a407ba04
      body: ""
      footer:
        Change-type: Major
        change-type: Major
        Connects-to: "#30"
        connects-to: "#30"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 4.0.0
  date: 2019-10-08T22:14:15.211Z
- commits:
    - subject: add diagram to README
      hash: 8e6c99a91062388ff96ad00d09b6ee6c010f5d28
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: dt-rush <nickp@balena.io>
        signed-off-by: dt-rush <nickp@balena.io>
      author: dt-rush
  version: 3.0.2
  date: 2019-09-18T17:55:13.350Z
- commits:
    - subject: error-protect all class methods
      hash: 01b5ab84e514c3a6f9289425cc8e2f097913a143
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 3.0.1
  date: 2019-09-13T13:56:23.087Z
- commits:
    - subject: Lazily generate `labelNames`
      hash: 36c50b79d322bc4d41d4eeca9ac594ffc5269490
      body: |
        This avoids calling `Object.keys` once for each call to store a metric
      footer:
        Change-type: major
        change-type: major
      author: Pagan Gazzard
  version: 3.0.0
  date: 2019-05-28T15:38:20.458Z
- commits:
    - subject: Fix build output
      hash: e924f0cfb4e7ef637453375fcd0220f58d6d8dd5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 2.4.1
  date: 2019-05-28T14:59:17.559Z
- commits:
    - subject: add linting/prettifier/husky
      hash: 56d844b9addd083124c766e1fe6d6c7d9defeecd
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
    - subject: refactor import / module structure, add AggregatorStrategy enum
      hash: af616e905a1446f2ad7e7db2b2471acb35ab0961
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
    - subject: support user specification of alternate aggregation strategies for
        clustered metrics
      hash: b7e878ec55ce7ccef9689d1d3f47ee4ff89be85a
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Connects-to: "#23"
        connects-to: "#23"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.4.0
  date: 2019-05-13T19:10:23.046Z
- commits:
    - subject: added warning to README about metrics.describe() in cluster master
      hash: 30bcd5632588f9427d2ba6aaa96279e4b255b96a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Connects-to: "#25"
        connects-to: "#25"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.3.1
  date: 2019-04-15T15:25:11.912Z
- commits:
    - subject: fix gauge metrics, add clear() method, add inc(), dec() methods
      hash: 805a0a3ea55f7f242981fa218c420daad441e0c8
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Connects-to: "#27"
        connects-to: "#27"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.3.0
  date: 2019-04-11T16:10:19.244Z
- commits:
    - subject: removed package-lock.json, out/ directory, added "prepare" in
        package.json, some minor bugfixes in index.ts, labeled dev dependencies
        in package.json
      hash: 58d04091af295d2ed5058f6ab7ad5fee05b15ea5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Connects-to: "#21"
        connects-to: "#21"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.2.1
  date: 2019-03-27T18:35:30.320Z
- commits:
    - subject: added aggregate request handler using prom-client's AggregatorRegistry
      hash: 13c7f6033587f6f380f28bb348df2f46dfbfd9e6
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Connects-to: "#19"
        connects-to: "#19"
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.2.0
  date: 2019-03-25T23:40:52.552Z
- commits:
    - subject: build output (really should be automated)
      hash: 144a9fb07cdb30982b485dc20cb501ebca7fd3a6
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.1.1
  date: 2019-03-20T15:54:09.451Z
- commits:
    - subject: added histogramSummary convenience method
      hash: fd3b4ac3ee4b2f478e66df4aeab7800ab9ccfb11
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.1.0
  date: 2019-03-20T14:56:54.231Z
- commits:
    - subject: renamed percentile to summary (to match prometheus, why differ from
        it?), also improved README
      hash: 293bc4495c9145566c5a4cafd266296c85650611
      body: ""
      footer:
        Change-type: major
        change-type: major
        Signed-off-by: Nick Payne <nickp@balena.io>
        signed-off-by: Nick Payne <nickp@balena.io>
      author: dt-rush
  version: 2.0.0
  date: 2019-03-18T06:52:33.656Z
- commits:
    - subject: "versionbot: Add CHANGELOG.yml (for nested changelogs)"
      hash: 6723fe3d76c9f1d99bd91bfaf0886f006d5b1570
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Will Boyce <will@balena.io>
        signed-off-by: Will Boyce <will@balena.io>
      author: Will Boyce
  version: 1.1.1
  date: 2019-03-14T13:25:09.885Z
- commits:
    - author: dt-rush
      body: ""
      footers:
        change-type: minor
        signed-off-by: Nick Payne <nickp@balena.io>
      hash: e031cbe0d0c6c3aa24878eda191f1dbeef484fe0
      subject: added single-line syntax (no description, or default description)
  date: 2019-02-12T02:50:07Z
  version: 1.1.0
- commits:
    - author: dt-rush
      body: ""
      footers:
        change-type: patch
        signed-off-by: Nick Payne <nickp@balena.io>
      hash: 9656637b2241d8ea078bdf5bb6d1bf4d25544012
      subject: fix sending 403 on not-authed
  date: 2019-02-06T19:26:18Z
  version: 1.0.6
- commits:
    - author: Giovanni Garufi
      body: ""
      footers:
        change-type: patch
        signed-off-by: Giovanni Garufi <giovanni@balena.io>
      hash: 451c8e913c2e3903de3a64b3bb128cb8a59c128d
      subject: Restore changelog and deleted circle.yml
  date: 2019-01-24T21:10:11Z
  version: 1.0.5
- commits:
    - author: dt-rush
      body: ""
      footers:
        change-type: patch
        signed-off-by: Nick Payne <nickp@balena.io>
      hash: 64af530877da86db2bc0ff76631fb360fcb62dd9
      subject: fixed support for labels
  date: 2019-01-24T02:31:20Z
  version: 1.0.4
- commits:
    - author: Giovanni Garufi
      body: ""
      footers:
        change-type: patch
        signed-off-by: Giovanni Garufi <giovanni@balena.io>
      hash: 2c761f57bc762eec6d19bb8a81e3282060525949
      subject: add CHANGELOG.md
  date: 2019-01-23T18:10:30Z
  version: 1.0.3
